{"version":3,"sources":["types.ts","utils/zones.ts","hooks/useKeyboardInstrument.ts","hooks/usePlayback.ts","images/logo.svg","utils/RandomPosition.tsx","shapes/Atom.tsx","images/125.gif","images/circl.gif","images/coffee.gif","images/firex.gif","images/henry.gif","images/orbital.gif","images/squa.gif","images/Triang.gif","util.ts","utils/KeyPresser.tsx","App.tsx","shapes/simple.tsx","shapes/Wiggler.tsx","index.tsx"],"names":["Event","zones","position","top","left","right","undefined","bottom","transform","actionCreator","actionCreatorFactory","keyDepressed","keyReleased","cycleLocationBack","cycleLocationFore","INITIAL_STATE","activeKeys","shapes","currentKey","setKeyStatus","s","key","pressed","toLowerCase","decrementKeyIndex","i","length","incrementKeyIndex","setNewPos","fn","console","log","currentShape","zoneIndex","coords","newShape","reducer","reducerWithInitialState","case","_","useKeyboardInstrument","React","useReducer","state","dispatch","addKeyDown","k","Object","keys","settings","actions","find","v","checkActionKey","addKeyUp","pressedKeys","initialState","recording","playing","playRequested","timeline","startRecordTime","startRecording","stopRecording","startPlaying","stopPlaying","togglePlaying","toggleRec","addNote","clearTimeLine","performance","now","e","slice","KeyUp","KeyDown","RandomPosition","withSize","size","children","id","style","Atom","className","src","logo","alt","width","height","document","documentElement","clientHeight","clientWidth","KeyPresser","masterKeyDown","dispatchPlayback","masterKeyUp","NaN","Number","parseInt","toUpperCase","handleKeyDown","handleKeyUp","d","play","forEach","t","setTimeout","useEffect","totalTime","setInterval","timline","usePlayback","overflowWrap","zIndex","margin","fontSize","color","fontFamily","display","justifyContent","alignItems","tabIndex","onKeyDown","preventDefault","onKeyUp","map","m","visible","mixBlendMode","component","trigant","circl","squa","henry","one245","coffee","firex","orbital","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b2a949a0.chunk.js","sourcesContent":["\nexport type Seconds = number;\n\nexport const KEY_A = 'a'\nexport const KEY_B = 'b'\nexport const KEY_C = 'c'\nexport type Key = typeof KEY_A | typeof KEY_B | typeof KEY_C | string\nexport type Note = [Seconds, Key, Event];\nexport type Timeline = Note[];\nexport enum Event {\n  KeyUp,\n  KeyDown,\n}\n\n\n\nexport const COMPONENT_ATOM = \"Atom\";\nexport const COMPONENT_CIRCLE = \"Circle\";\nexport type ComponentNames = typeof COMPONENT_ATOM | typeof COMPONENT_CIRCLE;\ntype Components = Record<ComponentNames, () => JSX.Element>;\n\ntype Mapping2 = Record<Key, keyof Components>;\n\n\nexport type SettingsState = {\n  mappings: Mapping2,\n  componentsAvailable: Components\n}","import React from \"react\"\n\nconst TOP_LEFT: React.CSSProperties= {\n  position: 'fixed',\n  top: '0px',\n  left:'0px',\n  right: undefined,\n  bottom: undefined,\n}\n\nexport const BOTTOM_LEFT:React.CSSProperties = {\n  position: 'fixed',\n  bottom: '0px',\n  left:'0px',\n  right: undefined,\n  top : undefined\n}\n\n\nconst BOTTOM_RIGHT: React.CSSProperties = {\n  position: 'fixed',\n  bottom: '0px',\n  right:'0px',\n  top: undefined,\n  left: undefined\n\n}\nconst TOP_RIGHT: React.CSSProperties = {\n  position: 'fixed',\n  top: '0px',\n  right:'0px',\n  bottom: undefined,\n  left: undefined\n}\nexport const CENTRE: React.CSSProperties = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)'\n}\n\nexport const zones = [TOP_LEFT, TOP_RIGHT, BOTTOM_RIGHT, BOTTOM_LEFT, CENTRE]","import React from \"react\";\nimport actionCreatorFactory from 'typescript-fsa';\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { settings } from \"../App\";\nimport { Key } from \"../types\";\nimport { BOTTOM_LEFT, zones } from \"../utils/zones\";\nimport { merge } from 'lodash'\nimport { isConstructorDeclaration } from \"typescript\";\n\nconst actionCreator = actionCreatorFactory();\n\nconst KEY_PRESSED = 'key_pressed'\nconst keyDepressed = actionCreator<Key>(KEY_PRESSED);\nconst KEY_RELEASED = 'key_released'\nconst keyReleased = actionCreator<Key>(KEY_RELEASED);\nconst CYCLE_LOC_BACK = 'cycle_loc_back';\nexport const cycleLocationBack = actionCreator<Key>(CYCLE_LOC_BACK);\nconst CYCLE_LOC_FORE = 'cycle_loc_fore';\nexport const cycleLocationFore = actionCreator<Key>(CYCLE_LOC_FORE);\n\ntype ShapeMeta = {\n  zoneIndex: number\n  coords:  Partial<React.CSSProperties>\n    \n}\n\ntype State = {\n  activeKeys: Record<Key, boolean>\n  currentKey: Key\n  shapes: Record<Key, ShapeMeta>\n}\n\nconst INITIAL_STATE: State = { activeKeys: {}, shapes: {}, currentKey: '' }\n\nconst setKeyStatus = (s: State, key: Key, pressed: boolean) => ({ ...s, activeKeys: { ...s.activeKeys, [key.toLowerCase()]: pressed } })\nconst decrementKeyIndex = (i: number) => ((i - 1) + zones.length) % zones.length\nconst incrementKeyIndex = (i: number) => (i + 1) % zones.length\nconst setNewPos = (s: State, fn: (i: number) => number): State => {\n  console.log(s.currentKey)\n  const currentShape: ShapeMeta = s.shapes[s.currentKey] ? s.shapes[s.currentKey] : { zoneIndex: 10, coords: {} }\n  const zoneIndex = fn(currentShape.zoneIndex)\n  const newShape: ShapeMeta = { ...currentShape, zoneIndex, coords: zones[zoneIndex] }\n  return { ...s, shapes: { ...s.shapes, [s.currentKey]: newShape } }\n}\n\nconst reducer = reducerWithInitialState(INITIAL_STATE)\n  .case(keyDepressed, (s, key) => ({ ...setKeyStatus(s, key, true), currentKey: key }))\n  .case(keyReleased, (s, key) => ({...setKeyStatus(s, key, false), currentKey: key}))\n  .case(cycleLocationBack, (s, _) => setNewPos(s, decrementKeyIndex))\n  .case(cycleLocationFore, (s, _) => setNewPos(s, incrementKeyIndex))\n\n\n\n\n\nexport const useKeyboardInstrument = () => {\n  const [state, dispatch] = React.useReducer(reducer, INITIAL_STATE)\n\n  const checkActionKey = (k: Key) => Object.keys(settings.actions).find((v) => v === k)\n  const addKeyDown = (k: Key) => {\n    if (!checkActionKey(k)) {\n      dispatch(keyDepressed(k));\n\n    }\n  }\n  const addKeyUp = (k: Key) => dispatch(keyReleased(k))\n\n  return { dispatch, state, addKeyDown, addKeyUp, cycleLocationBack, pressedKeys: state.activeKeys }\n\n}\n","import { delay } from 'lodash'\nimport React from \"react\";\nimport actionCreatorFactory from \"typescript-fsa\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { Event, Key, Timeline } from \"../types\";\nimport { useGetTimeElapsed } from \"./useGetTimeElapsed\";\n\ninterface UsePlaybackParams {\n  handleKeyDown: (k: Key) => void\n  handleKeyUp: (k: Key) => void\n}\n\ntype State = {\n  recording: boolean,\n  startRecordTime: number\n  playing: boolean,\n  timeline: Timeline,\n  playRequested: boolean,\n  keys: string\n}\n\nconst initialState: State = {\n  recording: false,\n  playing: false,\n  playRequested: false,\n  timeline: [],\n  startRecordTime: 0,\n  keys: ''\n}\n\nconst START_RECORDING = 'START_RECORDING'\nconst STOP_RECORDING = 'STOP_RECORDING'\nconst TOGGLE_REC = 'TOGGLE_REC'\nconst START_PLAYING = 'START_PLAYING'\nconst TOGGLE_PLAY = 'TOGGLE_PLAY'\n\nconst STOP_PLAYING = 'STOP_PLAYING'\nconst ADD_NOTE = 'ADD_NO'\nconst CLEAR_TIMELINE = 'clear'\n\nconst actionCreator = actionCreatorFactory();\nexport const startRecording = actionCreator(START_RECORDING)\nexport const stopRecording = actionCreator(STOP_RECORDING)\nexport const startPlaying = actionCreator(START_PLAYING)\nexport const stopPlaying = actionCreator(STOP_PLAYING)\nexport const togglePlaying = actionCreator(TOGGLE_PLAY)\nexport const toggleRec = actionCreator(TOGGLE_REC)\nexport const addNote = actionCreator<{\n  key: Key, e: Event\n}>(ADD_NOTE)\nexport const clearTimeLine = actionCreator(CLEAR_TIMELINE)\n\nconst reducer = reducerWithInitialState(initialState)\n  .case(startRecording, s => ({ ...s, recording: true, playing: false, startRecordTime: performance.now() }))\n  .case(stopRecording, s => ({ ...s, recording: false, playing: false }))\n  .case(toggleRec, s => {\n    if (!s.recording) {\n      return ({ ...s, recording: true, playing: false, startRecordTime: performance.now() });\n    }\n    return { ...s, playing: false, recording: false }\n  })\n  .case(startPlaying, s => ({ ...s, playing: true, recording: false }))\n  .case(stopPlaying, s => ({ ...s, playing: false, recording: false }))\n  .case(togglePlaying, s => {\n    return ({ ...s, recording: false, playRequested: !s.playRequested });\n  })\n  .case(addNote, (s, { key, e }) => {\n    if (key === 'Backspace') {\n      return { ...s, keys: s.keys.slice(0, -1) }\n    }\n    if (s.recording &&\n      key.length === 1) {\n      return {\n        ...s, keys: e === Event.KeyUp ? s.keys : s.keys + key,\n        playing: false, timeline: [...s.timeline,\n        [performance.now() - s.startRecordTime, key, e]]\n      }\n    }\n    if (key.length === 1 && e === Event.KeyDown) {\n      return { ...s, keys: s.keys + key };\n    }\n    return s\n  })\n  .case(clearTimeLine, (s) => ({ ...s, timeline: [] }))\n\nexport const usePlayback = ({ handleKeyDown, handleKeyUp }: UsePlaybackParams) => {\n  const [s, d] = React.useReducer(reducer, initialState)\n\n  // if (!s.playing && s.playRequested) {\n  //   d(startPlaying)\n  // }V\n  const play = () => {\n    console.log('in play')\n    s.timeline.forEach(([t, k, e], i) => {\n      setTimeout(() => {\n        switch (e) {\n          case Event.KeyDown:\n            console.log('pressing ', k)\n            handleKeyDown(k);\n            break;\n          case Event.KeyUp:\n            console.log('releaseing ', k)\n            handleKeyUp(k);\n            break;\n        }\n      }, t)\n    })\n    console.log('end play')\n\n  }\n  React.useEffect(() => {\n    // debugger;\n    if (s.playRequested) {\n      const totalTime = s.timeline[s.timeline.length-1][0]\n      play()\n      console.log('interval ', totalTime)\n      setInterval(play, totalTime)\n    }\n  }, [s.playRequested, s.timeline])\n  return {\n    timline: s.timeline, dispatch: d, keys: s.keys\n  }\n}\n\nfunction timeout(ms: number) {\n  return new Promise(res => setTimeout(res, ms));\n}\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { SizeMeProps, withSize } from \"react-sizeme\";\n\n// export const RandomPosition = ({ children }: React.PropsWithChildren<{}>) => {\n//   return (\n//     <SizeMe>\n//       <RandomPositionContainer>{children}</RandomPositionContainer>\n//     </SizeMe>\n//   );\n// };\n\nexport const RandomPositionContainer = ({\n  size,\n  children,\n}: React.PropsWithChildren<SizeMeProps>) => {\n    // console.log(\"size\", size)\n    // // useLayoutEffect <- ref to the elem\n    // const random = useRandomPosition(size.height, size.width)\n    // console.log(\"location\", random)\n  return (\n    <div\n      id=\"rando\"\n      style={{\n        // ...random,\n        position: \"absolute\",\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n\n\nexport const RandomPosition = withSize()(RandomPositionContainer);\n","import logo from \"../images/logo.svg\";\nimport { RandomPosition } from \"../utils/RandomPosition\";\n\nexport const Atom = () => {\n  return <img className='spin' src={logo} alt='logo' width='250px' height='250px' />;\n};\n\nexport const WrappedAtom = () => <RandomPosition><Atom/></RandomPosition>","export default __webpack_public_path__ + \"static/media/125.f44b9916.gif\";","export default __webpack_public_path__ + \"static/media/circl.95cad828.gif\";","export default __webpack_public_path__ + \"static/media/coffee.5f0252c9.gif\";","export default __webpack_public_path__ + \"static/media/firex.222bbfad.gif\";","export default __webpack_public_path__ + \"static/media/henry.45b986a2.gif\";","export default __webpack_public_path__ + \"static/media/orbital.a41d65df.gif\";","export default __webpack_public_path__ + \"static/media/squa.d96eb88c.gif\";","export default __webpack_public_path__ + \"static/media/Triang.42ce3d09.gif\";","/* eslint-disable use-isnan */\nimport { random } from 'lodash'\n\nconst height = document.documentElement.clientHeight\nconst width = document.documentElement.clientWidth\nconsole.log(\"page\", {height,width})\n\nexport const randomPos = (elWidth, elHeight) => (\n  {\n    top: `${random(0, height - elWidth)}px` ,\n    left: random(0, width - elHeight)\n  }\n)\n\n\nexport const isUpperCase = (s: string) => {\n\n  return Number.parseInt(s) === NaN &&  s === s.toUpperCase()\n}\n","import React, { StyleHTMLAttributes } from \"react\";\nimport Draggable from \"react-draggable\";\nimport { useKeyboardInstrument } from \"../hooks/useKeyboardInstrument\";\nimport { addNote, usePlayback } from \"../hooks/usePlayback\";\nimport { Event, Key } from \"../types\";\nimport { isUpperCase } from \"../util\";\n\nexport type IsVisible = { visible?: boolean };\n\nexport type KeyMapping = {\n  key: string;\n};\n\nexport type ShapeMapping = KeyMapping & {\n  component: (props: IsVisible) => JSX.Element;\n};\n\nexport type ActionMappings = Record<Key, Function>;\n\ntype Settings = {\n  shapes: ShapeMapping[];\n  actions: ActionMappings;\n};\n\ntype Props = Settings;\n\nexport const KeyPresser = ({ shapes, actions }: Props) => {\n  const masterKeyDown = (key: Key) => {\n    if (actions[key]) {\n      console.log(\"sdpecial key\");\n      dispatch(actions[key](key));\n      dispatchPlayback(actions[key](key));\n    } else {\n      addKeyDown(key);\n    }\n  };\n\n  const masterKeyUp = (key: Key) => {\n    if (actions[key]) {\n      return;\n    }\n    if (!isUpperCase(key)) {\n      addKeyUp(key);\n    }\n  };\n  const { dispatch, addKeyDown, addKeyUp, pressedKeys, state } =\n    useKeyboardInstrument();\n  const {\n    dispatch: dispatchPlayback,\n    keys,\n    timline,\n  } = usePlayback({\n    handleKeyDown: masterKeyDown,\n    handleKeyUp: masterKeyUp,\n  });\n\n  React.useEffect(() => {}, [pressedKeys]);\n\n  const handleKeyDown: React.KeyboardEventHandler = (e) => {\n    e.preventDefault();\n    if (state.activeKeys[e.key]) {\n      return;\n    }\n    dispatchPlayback(addNote({ key: e.key, e: Event.KeyDown }));\n    return masterKeyDown(e.key);\n  };\n\n  const handleKeyUp: React.KeyboardEventHandler = (e) => {\n    e.preventDefault();\n    dispatchPlayback(addNote({ key: e.key, e: Event.KeyUp }));\n    return masterKeyUp(e.key);\n  };\n\n  return (\n    <>\n      <p\n        style={{\n          overflowWrap: \"anywhere\",\n          zIndex: 100,\n          position: \"absolute\",\n          margin: 0,\n          fontSize: \"20pt\",\n          color: \"darkgray\",\n          fontFamily: \"Comic Sans MS, Comic Sans MS Regular\",\n        }}\n      >\n        {keys}\n      </p>\n      {/* <p style={{ zIndex: 100, paddingTop: '4em'}}>{JSON.stringify(timline)}</p> */}\n      <div\n        className=\"full-height\"\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n        tabIndex={1}\n        onKeyDown={handleKeyDown}\n        onKeyUp={handleKeyUp}\n      >\n        {shapes.map((m, i) => {\n          const visible = pressedKeys[m.key];\n          let coords = {};\n          if (state.currentKey === m.key) {\n            coords = state.shapes[state.currentKey]\n              ? state.shapes[state.currentKey].coords\n              : {};\n          }\n          const style: React.CSSProperties = visible\n            ? { ...coords, mixBlendMode: \"hard-light\" }\n            : { display: \"none\" };\n          return (\n            <div key={i} style={style}>\n              {m.component({ visible })}\n            </div>\n          );\n        })}\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\nimport { cycleLocationBack, cycleLocationFore } from \"./hooks/useKeyboardInstrument\";\nimport { clearTimeLine, togglePlaying, toggleRec } from \"./hooks/usePlayback\";\nimport { WrappedAtom } from \"./shapes/Atom\";\nimport {\n  Circl,\n  Coffee,\n  Firex, Henry,\n  One245, Orbital,\n  Squa,\n  Trigany\n} from \"./shapes/simple\";\nimport { Wiggler } from \"./shapes/Wiggler\";\nimport \"./style.css\";\nimport { KeyPresser } from \"./utils/KeyPresser\";\n\nexport const settings = {\n  shapes: [\n    { key: \"1\", component: Trigany },\n    { key: \"2\", component: Circl },\n    { key: \"3\", component: Squa },\n    { key: \"4\", component: Henry },\n    { key: \"5\", component: WrappedAtom },\n    { key: \"6\", component: Wiggler },\n    { key: \"7\", component: One245 },\n    { key: \"8\", component: Coffee },\n    { key: \"9\", component: Firex },\n    { key: \"0\", component: Orbital },\n  ],\n  actions: {\n    '[': cycleLocationBack,\n    ']': cycleLocationFore,\n    'Tab': toggleRec,\n    'Enter': togglePlaying,\n    'Escape': clearTimeLine\n  }\n};\nconst App = () => (\n  <>\n    <KeyPresser {...settings} />\n  </>\n);\n\nexport default App;\n\n","import one245 from \"../images/125.gif\";\nimport circl from '../images/circl.gif';\nimport coffee from '../images/coffee.gif';\nimport firex from '../images/firex.gif';\nimport henry from \"../images/henry.gif\";\nimport orbital from '../images/orbital.gif';\nimport squa from '../images/squa.gif';\nimport trigant from '../images/Triang.gif';\nexport const Henry = () => <img alt=\"\" src={henry} />;\nexport const One245  = () => <img alt=\"\" src={one245} />;\nexport const Circl  = () => <img alt=\"\" src={circl} />;\nexport const Coffee  = () => <img alt=\"\" src={coffee} />;\nexport const Firex  = () => <img alt=\"\" src={firex} />;\nexport const Trigany = () => <img alt=\"\" src={trigant} />;\nexport const Squa = () => <img alt=\"\" src={squa} />;\nexport const Orbital = () => <img alt=\"\" src={orbital} />;","\nexport const Wiggler = () => {\n  return (<div></div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}